<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category</title>
    <link rel="stylesheet" href="/css/general.css">
    <link rel="stylesheet" href="/css/category.css">
</head>
<body>
    <nav>
      <div class="nav-ctn">
        <a href="/">
          <div class="brand-name">
            <span class="green1"> Honeycare </span> 
            <span class="blue1"> Pharmacy and Beauty Hub </span>
          </div>
        </a>
        <div class="brand-logo">
          <a href="/">
            <img
            src="/img/logo/logo.png"
            alt="Honeycare pharmacy and Beauty Hub Logo"
          />
          </a>
        </div>
        <div class="flex">
            <div class="search-div">
                    <label class="search">
                        <svg xmlns="http://www.w3.org/2000/svg" width="31.042" height="28.512" viewBox="0 0 31.042 28.512">
                            <g id="Group_118" data-name="Group 118" transform="translate(1.5 1.5)">
                                <path id="Path_1" data-name="Path 1" d="M25.816,14.119c0,5.313-4.772,9.619-10.658,9.619S4.5,19.432,4.5,14.119,9.272,4.5,15.158,4.5,25.816,8.807,25.816,14.119Z" transform="translate(-4.5 -4.5)" fill="none" stroke="var(--green)" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                                <path id="Path_2" data-name="Path 2" d="M34.148,33.5l-9.173-8.53" transform="translate(-6.727 -8.613)" fill="none" stroke="var(--green)" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"/>
                            </g>
                        </svg>
                    </label>
                    <input type="search" placeholder="Cosmetics, Drugs ">

                </div>
        <a href="/cart">
          <div class="nav-extra">
            <label for="cart" class="bg-green1" id="cart-notice">1</label>
          <img src="/img/icons/Icon feather-shopping-cart.png" alt="" />
        </div>
        </a>
        </div>
                
            <!-- </div> -->
            </div>
            <div class="float">
                    <input type="search" placeholder="Cosmetics, Drugs" >
            </div>
    </nav>

    <section class="width">
        <div class="direction-section">
          <ul>
            <li><a href="/">Home ></a></li>
            <li class="direction-cat">Health ></li>
            <li class="direction-subcat">Vitamins </li>
          </ul>
        </div>
        <div class="headsection">
            <div class="">
                <a href="/refill">
                    <div class="refill">
                        Refill Prescription
                    </div>
                </a>
                <a href="/contact">
                    <div class="speaktopharm">
                        Speak with a Pharmacist
                    </div>
                </a>
            </div>
            <div class="d2d-del">
                Quality Delivered to your Door
            </div>
        </div>
            
        <div class="subcategory color-text" id="subcategory"> Vitamins</div>
        <div class="prod" id="prodDiv">            
        </div>
        <!-- <div class="product-bottom-nav">
            <ul>
                <li class="active">1</li>
                <li>2</li>
                <li>3</li>
                <li>Next</li>
            </ul>
        </div> -->
        
        <footer>
            <ul>
                <li><a href="/contact">Contact Us</a></li>
                <li><a href="/contact">Terms and conditions</a></li>
                <li><a href="/contact">Privacy policy</a></li>
            </ul>
            <p>Copyright Honeycare</p>
        </footer>
    </section>
    <script src="/js/general.js"></script>
    <script>
      var category = window.location.href.split("category/")[1].split("/")[0];
      var subcategory = window.location.href.split("category/")[1].split("/")[1];
      document.getElementsByClassName("direction-cat")[0].innerHTML = category + " >";
      document.getElementsByClassName("direction-subcat")[0].innerHTML = subcategory;
      document.getElementsByClassName("subcategory")[0].innerHTML = subcategory;

      function loadproduct(data){
        var productDiv = document.getElementById("prodDiv");
        if(data){
          data.forEach(product=>{
            // console.log(product)
            var hh = JSON.stringify(product)
            prodDiv.innerHTML +=
              `
                <div class="product">
                <a href="/product/${product.category}/${product.subcategory}/singleproduct/${product._id}">
                    <div class="product-img">
                          <img src="${product.image}" alt="honeycare pharmacy ${product.name}">
                    </div>
                  <div class="product-name">
                      ${product.name}
                  </div>
                  <div class="product-price price">${product.price}</div>
                </a>
                  <div class="addtocart-btn btn bg-green1" onclick='addtocart(${hh})'>
                      <img src="/img/icons/Icon material-add-shopping-cart.png" alt="">
                  </div>
              </div>
              `
          })
        }
      }


      // function pagination(number){
      //   if(number>9){

      //   }
      // }

      fetch(`/products/${category}/${subcategory}`).then((res)=>{
        return res.json()
      }).then((data)=>{
        if(data.status === 200){
          // console.log(data.productstosend)
          loadproduct(data.productstosend)
        }else{
          alert(data.message)
        }
      })
      // console.log(window.location.href.split("category/")[1].split("/")[0])
    </script>
</body>
</html>